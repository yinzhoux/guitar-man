
-----

### **吉他谱管理软件 (项目代号：photo-man) 开发策划书**

#### 1\. 项目概述 (Project Overview)

本项目旨在开发一款桌面应用程序，用于帮助吉他爱好者及音乐人高效地管理、查找和查看个人收藏的吉他谱。软件的核心是将分散的图片格式（JPG, PNG等）的吉他谱，整理成以“歌曲”为单位的结构化数据，并提供流畅的查看和交互体验。

  * **软件名称（建议）**: TabTamer / 谱海拾贝 / 吉他谱管家
  * **核心解决问题**: 解决吉他谱图片文件存储混乱、查找困难、查看不便的问题。
  * **目标用户**: 吉他初学者、进阶乐手、吉他教师、乐队成员。

#### 2\. 目标用户分析 (Target Audience)

  * **痛点**:
      * 网上下载的吉他谱通常是多张图片，文件名杂乱，容易丢失某一页。
      * 想找某一首歌的谱子，需要在成百上千的文件夹和文件中手动翻找。
      * 查看图片时，需要频繁地手动切换下一张，且缩放体验不佳。
      * 无法为谱子添加备注，如调弦方式、练习重点、速度等。

#### 3\. 功能模块详细设计 (Functional Modules)

##### 模块一：吉他谱库管理 (Tab Library Management)

这是软件的主界面和核心数据管理部分。

  * **3.1. 添加新谱 (Add New Tab)**

      * **入口**: 主界面提供一个醒目的“添加新谱”按钮。
      * **流程**:
        1.  点击按钮，弹出一个信息填写窗口。
        2.  **必填信息**:
              * `歌曲标题 (Title)`
              * `演奏者/乐队 (Artist)`
        3.  **选填信息**:
              * `专辑 (Album)`
              * `风格 (Genre)`: 如摇滚、民谣、金属、布鲁斯 (可多选)。
              * `难度 (Difficulty)`: 如 ★☆☆☆☆ 到 ★★★★★。
              * `调弦方式 (Tuning)`: 如 Standard, Drop D, Open G (可自定义输入)。
              * `备注 (Notes)`: 多行文本框，用于记录个人笔记。
        4.  **图片导入**:
              * 提供“选择图片文件”按钮，允许用户一次性选择一个或多个图片文件。
              * 图片列表会显示缩略图和文件名，用户可以拖拽调整图片的顺序（这非常重要，决定了查看时的页面顺序）。
              * 用户可以删除已选择的某张图片。
        5.  点击“保存”，软件将这些信息和图片关联，创建一个新的吉他谱对象。

  * **3.2. 查找与筛选 (Search & Filter)**

      * **快速搜索**: 主界面顶部提供一个搜索框，可以实时根据用户输入的`歌曲标题`或`演奏者`进行模糊搜索。
      * **高级筛选**: 提供筛选面板，可以根据`风格`、`难度`、`调弦方式`等一个或多个条件组合筛选曲谱列表。

  * **3.3. 修改信息 (Modify Tab Info)**

      * 在曲谱列表中，每个条目旁都有一个“编辑”按钮。
      * 点击后，弹出与“添加新谱”类似的窗口，但已预先填好所有当前信息。
      * 用户可以修改文本信息，也可以重新排序、添加或删除图片。

  * **3.4. 删除曲谱 (Delete Tab)**

      * 每个条目旁有“删除”按钮。
      * 点击后，弹出**确认对话框**（例如：“确定要删除《歌曲名》吗？相关图片文件将一并删除。”），防止误操作。

##### 模块二：吉他谱查看器 (Tab Viewer)

当用户双击曲谱列表中的任意条目时，进入此界面。

  * **3.5. 界面布局 (Layout)**

      * **主显示区**: 占据大部分窗口，用于显示吉他谱图片。
      * **页面导航**:
          * 推荐采用**垂直滚动**的方式，将所有图片从上到下拼接成长图进行展示，这是最符合阅读习惯的方式。
          * 也可提供翻页按钮（上一页/下一页）或底部缩略图导航栏作为备选。
      * **工具栏**: 位于顶部或侧边，包含交互按钮。

  * **3.6. 核心交互 (Core Interactions)**

      * **放大/缩小 (Zoom In/Out)**:
          * 提供 `+` 和 `-` 按钮。
          * 支持 `Ctrl + 鼠标滚轮` 进行快速缩放。
          * 支持触摸板双指捏合缩放。
          * 提供“适应宽度”和“原始尺寸”的快捷按钮。
      * **平移 (Pan)**: 当图片放大后，鼠标光标变为手型，用户可以按住鼠标左键拖动图片来查看不同部分。
      * **全屏模式**: 提供一个按钮，让查看器占据整个屏幕，减少干扰。

#### 4\. 数据结构与存储方案 (Data Structure & Storage)

  * **4.1. 数据对象定义 (Data Object)**
    每一首吉他谱可以定义为一个对象，包含以下字段：

    ```json
    {
      "id": "unique_identifier_12345", // 唯一ID，可以是UUID
      "title": "Stairway to Heaven",
      "artist": "Led Zeppelin",
      "album": "Led Zeppelin IV",
      "genre": ["Rock", "Folk Rock"],
      "difficulty": 5, // 1-5
      "tuning": "Standard EADGBe",
      "notes": "注意前奏的指法变化...",
      "date_added": "2025-08-10T20:30:00Z",
      "image_files": [ // 按顺序排列的图片文件名
        "1.jpg",
        "2.jpg",
        "3.jpg"
      ]
    }
    ```

  * **4.2. 存储方案**

      * **元数据 (Metadata)**: 对于上述的文本信息（除图片外），强烈建议使用一个轻量级的数据库来存储，而不是纯文本文件。
          * **推荐**: **SQLite**。这是一个单文件数据库，无需安装独立的数据库服务器，非常适合桌面应用。它能极大地提升搜索和筛选的性能。
      * **图片文件 (Image Files)**:
          * **方案**: 创建一个专门的“媒体库”文件夹（例如在`我的文档/TabTamer/Library`下）。
          * 当用户添加新谱时，软件**自动将用户选择的图片文件复制**到媒体库的一个专属子文件夹中。文件夹名可以用谱子的`id`来命名，以保证唯一性。
          * **示例**: `.../Library/unique_identifier_12345/1.jpg`, `.../Library/unique_identifier_12345/2.jpg`
          * **优点**: 这样可以确保应用的数据库和文件是自包含的，即使用户删除了原始图片，应用内的谱子也不会失效。这是最稳妥的方案。


#### 5\. 开发流程建议 (Development Workflow)

1.  **阶段一：MVP (最小可行产品)**

      * **目标**: 快速实现最核心的功能，验证想法。
      * **功能列表**:
          * 实现基于SQLite的数据库创建。
          * 实现“添加新谱”功能（仅支持标题、作者和图片选择/排序）。
          * 实现主界面的曲谱列表展示（无需搜索和筛选）。
          * 实现基础的图片查看器（垂直滚动查看、用按钮实现缩放）。
          * 实现“删除曲谱”功能。